buikding on the previous version
adding functionality to count the state transitions
check if a frame is empty or not after thresholding
find the frequency
putting a mask for finding if the frame is empty or not